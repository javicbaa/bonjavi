<!DOCTYPE html>
<html>
<meta charset="utf-8" />
	<head>
	<title>Hidrografia</title>
		<script src=" https://unpkg.com/leaflet@1.6.0/dist/leaflet.js "></script>
		<script type="text/javascript" src="embalsesb.js"></script>
		<link rel="stylesheet" href=" https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />

		<style>
			#map {
			width: 75%;
			height: 580px;
			box-shadow: 5px 5px 5px #888;
			}
			
			.info {
			text-align: center;
			padding: 6px 8px;
			font: 14px/16px Candara;
			background: white;
			background: rgba(255,255,255,0.8);
			box-shadow: 0 0 15px rgba(0,0,0,0.2);
			border-radius: 5px;
			}
			.info h2 {
			position: topleft;
			margin: 0 0 5px;
			color: #777;
			}
		</style>
	</head>

	<body>
		<div id = 'map'> </div>

		<script>
				
			var mapbox = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw',
				{
				maxZoom: 18,
				attribution: 'Map data &copy; <a href="http://openstreetmap.org"> OpenStreetMap</a> contributors, ' + 
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' + 
				'Imagery © <a href="http://mapbox.com">Mapbox</a>',
				id:'mapbox.light'
				});
							
			var OSM = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
				});
			
			var limites = L.tileLayer.wms("http://localhost:8080/geoserver/wms", {
				 layers: 'limites',
				 format: 'image/png',
				 transparent: true,
				 tiled: true,
				 attribution: "Natural Earth"
				});
			
			var rios = L.tileLayer.wms("http://localhost:8080/geoserver/wms", {
				 layers: 'rios1',
				 format: 'image/png',
				 transparent: true,
				 tiled: true,
				 attribution: "Natural Earth"
				});
				
			var style = {
				 fillColor: 'blue',
				 weight: 1,
				 color: 'black',
				 opacity: 0,
				 fillOpacity: 1
				 };
			
			function popUpInfo(feature, layer) {
					if (feature.properties && feature.properties.NAME) {
					layer.bindPopup("<b>"+feature.properties.NAME+"</b><br>"+feature.properties.CAPACIDAD+" ("+feature.properties.COTA+")");
				}
			}
			var diques = L.geoJson(embalsesb, {
				style: style,
				onEachFeature: popUpInfo
				});

			var map = L.map('map', {
				center: [41.66, -4.72],
				zoom: 6,
				layers: [mapbox, OSM, limites, rios, diques],
				scrollWheelZoom: true,
				});
				
			L.control.scale({imperial: false}).addTo(map);
			
			var title = L.control();
			title.onAdd = function (map) {
			 var div = L.DomUtil.create('div', 'info');
			 div.innerHTML +=
			 '<h2>HIDROGRAFIA</h2>Confederación Hidrográfica del Duero';
			 return div;
			};
			title.addTo(map);
				
			var baseMaps = {
				 "OpenStreetMap": OSM,
				 "Mapbox-Light": mapbox,
				 
				};
			var overlayMaps = {
				 "<span style='color: #00aeff'>Rios</span>": rios,
				 "<span style='color: #8c0303'>Limites de Demarcacion</span>": limites,
				 "<span style='color: blue'>Embalses</span>": diques,
				 };
				 
			L.control.layers(baseMaps, overlayMaps,{
			position: 'topleft'}).addTo(map);
					
		</script>
	</body>
</html>